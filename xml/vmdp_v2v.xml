<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>


<sect1 id="sec.vmdp.v2v.intro">
 <title>VMDP and v2v support</title>
 <para>
  The <emphasis>virt-v2v</emphasis> utility provides an easy way to convert virtual machines
  from one hypervisor format to another (e.g. from Xen to KVM). In the
  case of Windows guests running under Xen, this conversion process
  includes support for the automatic deployment of the VMDP.
 </para>
 
 <sect2 id="sec.vmdp.v2v.package">
  <title>VMDP RPM package</title>
  <para>
   The virt-v2v-vmdp RPM is a repackaging of the Windows VMDP drivers into a
   directory structure usable by the virt-v2v utility. Once installed on a KVM
   host, any Windows guests migrated to that host using the virt-v2v process
   can have the VMDP drivers automatically installed.
  </para>
  <para>
   By default, virt-v2v will first check for the existence of the VMDP on the
   Windows guest undergoing conversion. If found on the guest, and the
   virt-v2v-vmdp RPM is installed on the target host (the machine running the
   virt-v2v process), virt-v2v will automatically install the VMDP drivers as
   part of the conversion. This driver reinstallation is required to replace
   Xen specific drivers with virtio drivers for use with KVM.
  </para>
 </sect2>
 
 <sect2 id="sec.vmdp.v2v.installation">
  <title>v2v -vmpd parameter</title>
  <para>
   Installation of the VMDP can be manually influenced during virt-v2v
   migration using the <command>â€“vmdp</command> parameter:
  </para>
  <itemizedlist>
   <listitem>
   <para><command>--vmdp=auto</command>: only install the VMDP if already
   installed on source image</para>
   </listitem>
   <listitem>
   <para><command>--vmdp=always</command>: always install the VMDP during
   >indows guest conversions</para></listitem>
   <listitem>
   <para><command>--vmdp=never</command>: nerver install the VMDP</para></listitem>
  </itemizedlist>
  <para>
   In addition to installing the drivers included with the virt-v2v-vmdp RPM,
   it is possible for virt-v2v to copy the VMDP setup program itself to the
   converted guest. While not required, if the virt-v2v host is configured to
   perform this, the VMDP setup program will be automatically ran upon first
   login. This will ensure the install/uninstall program is registered with
   Windows and any residual Xen drivers are correctly uninstalled. To allow
   for this capability, the VMDP setup program (<command>VMDP-WIN-2.2.exe</command>) must be
   copied to <filename>/var/lib/virt-v2v/software/windows</filename> on the virt-v2v host. After
   copying the executable in place, ensure the setup executable name is
   correctly specified in <filename>/var/lib/virt-v2v/virt-v2v.db</filename>
   as follows:
  </para>
  <screen>
   <![CDATA[<!-- SUSE Virtual Machine Driver Pack (VMDP) setup program -->
   <app os='windows' name='vmdp'>
     <path>windows/VMDP-WIN-2.2.exe</path>
   </app>]]></screen>
  
  <para>
   The virt-v2v-vmdp RPM is available in the same download location as the
   VMDP executable.
  </para>
 </sect2>
 
 <sect2 id="sec.vmdp.v2v.official.doc">
  <title>Xen to KVM Documentation</title>
  <para>
   See <ulink url="https://www.suse.com/documentation/sles11/singlehtml/art_sles_xen2kvmquick/art_sles_xen2kvmquick.html"/>
  </para>
 </sect2>

</sect1>
